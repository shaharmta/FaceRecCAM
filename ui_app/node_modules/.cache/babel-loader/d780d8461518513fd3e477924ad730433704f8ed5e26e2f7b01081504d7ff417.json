{"ast":null,"code":"var _jsxFileName = \"/Users/matanmeir1/FaceRecCAM/FaceRecCAM/ui_app/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Container, Paper, Typography, Box, Button, CircularProgress, Alert } from '@mui/material';\nimport { CheckCircle, PersonAdd, Cancel } from '@mui/icons-material';\nimport RecognitionResult from './components/RecognitionResult';\nimport AddPersonDialog from './components/AddPersonDialog';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [ws, setWs] = useState(null);\n  const [lastEvent, setLastEvent] = useState(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [showAddPerson, setShowAddPerson] = useState(false);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const websocket = new WebSocket('ws://localhost:3000/ws');\n    websocket.onopen = () => {\n      setIsConnected(true);\n      setError(null);\n    };\n    websocket.onclose = () => {\n      setIsConnected(false);\n      setError('WebSocket connection lost. Reconnecting...');\n    };\n    websocket.onerror = error => {\n      setError('WebSocket error: ' + error.message);\n    };\n    websocket.onmessage = event => {\n      const data = JSON.parse(event.data);\n      setLastEvent(data);\n    };\n    setWs(websocket);\n    return () => {\n      websocket.close();\n    };\n  }, []);\n  const handleAddPerson = async (name, image) => {\n    try {\n      const formData = new FormData();\n      formData.append('name', name);\n      formData.append('file', image);\n      const response = await fetch('/add-person', {\n        method: 'POST',\n        body: formData\n      });\n      if (!response.ok) {\n        throw new Error('Failed to add person');\n      }\n      setShowAddPerson(false);\n    } catch (error) {\n      setError('Failed to add person: ' + error.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"md\",\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        my: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        component: \"h1\",\n        gutterBottom: true,\n        align: \"center\",\n        children: \"Face Recognition Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          mb: 2\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this), !isConnected && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"warning\",\n        sx: {\n          mb: 2\n        },\n        children: \"Connecting to server...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Paper, {\n        sx: {\n          p: 3,\n          mb: 3\n        },\n        children: lastEvent ? /*#__PURE__*/_jsxDEV(RecognitionResult, {\n          event: lastEvent,\n          onAddPerson: () => setShowAddPerson(true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            textAlign: 'center',\n            py: 4\n          },\n          children: [/*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            sx: {\n              mt: 2\n            },\n            children: \"Waiting for face recognition events...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AddPersonDialog, {\n      open: showAddPerson,\n      onClose: () => setShowAddPerson(false),\n      onSubmit: handleAddPerson\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"yLmbJW62/SFZHlPSKYefYY+XtZ4=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Container","Paper","Typography","Box","Button","CircularProgress","Alert","CheckCircle","PersonAdd","Cancel","RecognitionResult","AddPersonDialog","jsxDEV","_jsxDEV","App","_s","ws","setWs","lastEvent","setLastEvent","isConnected","setIsConnected","showAddPerson","setShowAddPerson","error","setError","websocket","WebSocket","onopen","onclose","onerror","message","onmessage","event","data","JSON","parse","close","handleAddPerson","name","image","formData","FormData","append","response","fetch","method","body","ok","Error","maxWidth","children","sx","my","variant","component","gutterBottom","align","fileName","_jsxFileName","lineNumber","columnNumber","severity","mb","p","onAddPerson","textAlign","py","mt","open","onClose","onSubmit","_c","$RefreshReg$"],"sources":["/Users/matanmeir1/FaceRecCAM/FaceRecCAM/ui_app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Container, \n  Paper, \n  Typography, \n  Box, \n  Button,\n  CircularProgress,\n  Alert\n} from '@mui/material';\nimport { CheckCircle, PersonAdd, Cancel } from '@mui/icons-material';\nimport RecognitionResult from './components/RecognitionResult';\nimport AddPersonDialog from './components/AddPersonDialog';\n\nfunction App() {\n  const [ws, setWs] = useState(null);\n  const [lastEvent, setLastEvent] = useState(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [showAddPerson, setShowAddPerson] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const websocket = new WebSocket('ws://localhost:3000/ws');\n    \n    websocket.onopen = () => {\n      setIsConnected(true);\n      setError(null);\n    };\n    \n    websocket.onclose = () => {\n      setIsConnected(false);\n      setError('WebSocket connection lost. Reconnecting...');\n    };\n    \n    websocket.onerror = (error) => {\n      setError('WebSocket error: ' + error.message);\n    };\n    \n    websocket.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      setLastEvent(data);\n    };\n    \n    setWs(websocket);\n    \n    return () => {\n      websocket.close();\n    };\n  }, []);\n\n  const handleAddPerson = async (name, image) => {\n    try {\n      const formData = new FormData();\n      formData.append('name', name);\n      formData.append('file', image);\n      \n      const response = await fetch('/add-person', {\n        method: 'POST',\n        body: formData,\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to add person');\n      }\n      \n      setShowAddPerson(false);\n    } catch (error) {\n      setError('Failed to add person: ' + error.message);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"md\">\n      <Box sx={{ my: 4 }}>\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom align=\"center\">\n          Face Recognition Dashboard\n        </Typography>\n        \n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {error}\n          </Alert>\n        )}\n        \n        {!isConnected && (\n          <Alert severity=\"warning\" sx={{ mb: 2 }}>\n            Connecting to server...\n          </Alert>\n        )}\n        \n        <Paper sx={{ p: 3, mb: 3 }}>\n          {lastEvent ? (\n            <RecognitionResult \n              event={lastEvent}\n              onAddPerson={() => setShowAddPerson(true)}\n            />\n          ) : (\n            <Box sx={{ textAlign: 'center', py: 4 }}>\n              <CircularProgress />\n              <Typography variant=\"body1\" sx={{ mt: 2 }}>\n                Waiting for face recognition events...\n              </Typography>\n            </Box>\n          )}\n        </Paper>\n      </Box>\n      \n      <AddPersonDialog\n        open={showAddPerson}\n        onClose={() => setShowAddPerson(false)}\n        onSubmit={handleAddPerson}\n      />\n    </Container>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}