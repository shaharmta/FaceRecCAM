{"ast":null,"code":"var _jsxFileName = \"/Users/matanmeir1/FaceRecCAM/FaceRecCAM/ui_app/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Container, Paper, Typography, Box, Button, CircularProgress, Alert, Divider } from '@mui/material';\nimport { CheckCircle, PersonAdd, Cancel } from '@mui/icons-material';\nimport RecognitionResult from './components/RecognitionResult';\nimport AddPersonDialog from './components/AddPersonDialog';\nimport NotificationList from './components/NotificationList';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [ws, setWs] = useState(null);\n  const [lastEvent, setLastEvent] = useState(null);\n  const [notifications, setNotifications] = useState([]);\n  const [isConnected, setIsConnected] = useState(false);\n  const [showAddPerson, setShowAddPerson] = useState(false);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const websocket = new WebSocket('ws://localhost:3000/ws');\n    websocket.onopen = () => {\n      setIsConnected(true);\n      setError(null);\n    };\n    websocket.onclose = () => {\n      setIsConnected(false);\n      setError('WebSocket connection lost. Reconnecting...');\n    };\n    websocket.onerror = error => {\n      setError('WebSocket error: ' + error.message);\n    };\n    websocket.onmessage = event => {\n      const data = JSON.parse(event.data);\n      setLastEvent(data);\n      setNotifications(prev => [data, ...prev].slice(0, 10)); // Keep last 10 notifications\n    };\n    setWs(websocket);\n    return () => {\n      websocket.close();\n    };\n  }, []);\n  const handleAddPerson = async (name, image) => {\n    try {\n      const formData = new FormData();\n      formData.append('name', name);\n      formData.append('file', image);\n      const response = await fetch('/add-person', {\n        method: 'POST',\n        body: formData\n      });\n      if (!response.ok) {\n        throw new Error('Failed to add person');\n      }\n      setShowAddPerson(false);\n    } catch (error) {\n      setError('Failed to add person: ' + error.message);\n    }\n  };\n  const handleDismissNotification = index => {\n    setNotifications(prev => prev.filter((_, i) => i !== index));\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"md\",\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        my: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        component: \"h1\",\n        gutterBottom: true,\n        align: \"center\",\n        children: \"Face Recognition Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          mb: 2\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), !isConnected && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"warning\",\n        sx: {\n          mb: 2\n        },\n        children: \"Connecting to server...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Paper, {\n        sx: {\n          p: 3,\n          mb: 3\n        },\n        children: lastEvent ? /*#__PURE__*/_jsxDEV(RecognitionResult, {\n          event: lastEvent,\n          onAddPerson: () => setShowAddPerson(true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            textAlign: 'center',\n            py: 4\n          },\n          children: [/*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            sx: {\n              mt: 2\n            },\n            children: \"Waiting for face recognition events...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Paper, {\n        sx: {\n          p: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          gutterBottom: true,\n          children: \"Recent Recognition Events\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {\n          sx: {\n            mb: 2\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NotificationList, {\n          notifications: notifications,\n          onAddPerson: () => setShowAddPerson(true),\n          onDismiss: handleDismissNotification\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AddPersonDialog, {\n      open: showAddPerson,\n      onClose: () => setShowAddPerson(false),\n      onSubmit: handleAddPerson\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"QMRCP1sd41vHnUyKLfwtI3bnKz8=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Container","Paper","Typography","Box","Button","CircularProgress","Alert","Divider","CheckCircle","PersonAdd","Cancel","RecognitionResult","AddPersonDialog","NotificationList","jsxDEV","_jsxDEV","App","_s","ws","setWs","lastEvent","setLastEvent","notifications","setNotifications","isConnected","setIsConnected","showAddPerson","setShowAddPerson","error","setError","websocket","WebSocket","onopen","onclose","onerror","message","onmessage","event","data","JSON","parse","prev","slice","close","handleAddPerson","name","image","formData","FormData","append","response","fetch","method","body","ok","Error","handleDismissNotification","index","filter","_","i","maxWidth","children","sx","my","variant","component","gutterBottom","align","fileName","_jsxFileName","lineNumber","columnNumber","severity","mb","p","onAddPerson","textAlign","py","mt","onDismiss","open","onClose","onSubmit","_c","$RefreshReg$"],"sources":["/Users/matanmeir1/FaceRecCAM/FaceRecCAM/ui_app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Container, \n  Paper, \n  Typography, \n  Box, \n  Button,\n  CircularProgress,\n  Alert,\n  Divider\n} from '@mui/material';\nimport { CheckCircle, PersonAdd, Cancel } from '@mui/icons-material';\nimport RecognitionResult from './components/RecognitionResult';\nimport AddPersonDialog from './components/AddPersonDialog';\nimport NotificationList from './components/NotificationList';\n\nfunction App() {\n  const [ws, setWs] = useState(null);\n  const [lastEvent, setLastEvent] = useState(null);\n  const [notifications, setNotifications] = useState([]);\n  const [isConnected, setIsConnected] = useState(false);\n  const [showAddPerson, setShowAddPerson] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const websocket = new WebSocket('ws://localhost:3000/ws');\n    \n    websocket.onopen = () => {\n      setIsConnected(true);\n      setError(null);\n    };\n    \n    websocket.onclose = () => {\n      setIsConnected(false);\n      setError('WebSocket connection lost. Reconnecting...');\n    };\n    \n    websocket.onerror = (error) => {\n      setError('WebSocket error: ' + error.message);\n    };\n    \n    websocket.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      setLastEvent(data);\n      setNotifications(prev => [data, ...prev].slice(0, 10)); // Keep last 10 notifications\n    };\n    \n    setWs(websocket);\n    \n    return () => {\n      websocket.close();\n    };\n  }, []);\n\n  const handleAddPerson = async (name, image) => {\n    try {\n      const formData = new FormData();\n      formData.append('name', name);\n      formData.append('file', image);\n      \n      const response = await fetch('/add-person', {\n        method: 'POST',\n        body: formData,\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to add person');\n      }\n      \n      setShowAddPerson(false);\n    } catch (error) {\n      setError('Failed to add person: ' + error.message);\n    }\n  };\n\n  const handleDismissNotification = (index) => {\n    setNotifications(prev => prev.filter((_, i) => i !== index));\n  };\n\n  return (\n    <Container maxWidth=\"md\">\n      <Box sx={{ my: 4 }}>\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom align=\"center\">\n          Face Recognition Dashboard\n        </Typography>\n        \n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {error}\n          </Alert>\n        )}\n        \n        {!isConnected && (\n          <Alert severity=\"warning\" sx={{ mb: 2 }}>\n            Connecting to server...\n          </Alert>\n        )}\n        \n        <Paper sx={{ p: 3, mb: 3 }}>\n          {lastEvent ? (\n            <RecognitionResult \n              event={lastEvent}\n              onAddPerson={() => setShowAddPerson(true)}\n            />\n          ) : (\n            <Box sx={{ textAlign: 'center', py: 4 }}>\n              <CircularProgress />\n              <Typography variant=\"body1\" sx={{ mt: 2 }}>\n                Waiting for face recognition events...\n              </Typography>\n            </Box>\n          )}\n        </Paper>\n\n        <Paper sx={{ p: 3 }}>\n          <Typography variant=\"h6\" gutterBottom>\n            Recent Recognition Events\n          </Typography>\n          <Divider sx={{ mb: 2 }} />\n          <NotificationList\n            notifications={notifications}\n            onAddPerson={() => setShowAddPerson(true)}\n            onDismiss={handleDismissNotification}\n          />\n        </Paper>\n      </Box>\n      \n      <AddPersonDialog\n        open={showAddPerson}\n        onClose={() => setShowAddPerson(false)}\n        onSubmit={handleAddPerson}\n      />\n    </Container>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}